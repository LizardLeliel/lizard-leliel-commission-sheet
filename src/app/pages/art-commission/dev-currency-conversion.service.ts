import { Injectable } from '@angular/core';

const SAMPLE_CONVERSION_TABLE: any = {
  "success": true,
  "timestamp": 1663779243,
  "base": "USD",
  "date": "2022-09-21",
  "rates": {
      "AED": 3.673099,
      "AFN": 86.999959,
      "ALL": 115.850017,
      "AMD": 416.008553,
      "ANG": 1.803593,
      "AOA": 431.905969,
      "ARS": 144.884003,
      "AUD": 1.502562,
      "AWG": 1.8,
      "AZN": 1.696076,
      "BAM": 1.972776,
      "BBD": 2.020637,
      "BDT": 103.628331,
      "BGN": 1.978205,
      "BHD": 0.376955,
      "BIF": 2036,
      "BMD": 1,
      "BND": 1.414133,
      "BOB": 6.915233,
      "BRL": 5.185599,
      "BSD": 1.000751,
      "BTC": 5.195327e-05,
      "BTN": 79.982853,
      "BWP": 13.150333,
      "BYN": 2.525998,
      "BYR": 19600,
      "BZD": 2.017208,
      "CAD": 1.340045,
      "CDF": 2034.999706,
      "CHF": 0.966355,
      "CLF": 0.034096,
      "CLP": 941.059962,
      "CNY": 7.049038,
      "COP": 4409,
      "CRC": 631.022084,
      "CUC": 1,
      "CUP": 26.5,
      "CVE": 106.297936,
      "CZK": 24.993039,
      "DJF": 178.15321,
      "DKK": 7.53602,
      "DOP": 53.499459,
      "DZD": 140.865006,
      "EGP": 19.480702,
      "ERN": 15,
      "ETB": 51.502537,
      "EUR": 1.013405,
      "FJD": 2.225027,
      "FKP": 0.864596,
      "GBP": 0.883875,
      "GEL": 3.000124,
      "GGP": 0.864596,
      "GHS": 9.994998,
      "GIP": 0.864596,
      "GMD": 54.798459,
      "GNF": 8800.000222,
      "GTQ": 7.810996,
      "GYD": 209.378562,
      "HKD": 7.84987,
      "HNL": 24.490234,
      "HRK": 7.623903,
      "HTG": 119.08979,
      "HUF": 412.045013,
      "IDR": 15026.35,
      "ILS": 3.46119,
      "IMP": 0.864596,
      "INR": 79.986396,
      "IQD": 1460,
      "IRR": 42400.000358,
      "ISK": 142.179761,
      "JEP": 0.864596,
      "JMD": 152.044542,
      "JOD": 0.70898,
      "JPY": 144.378971,
      "KES": 120.594249,
      "KGS": 81.193902,
      "KHR": 4062.000358,
      "KMF": 472.849545,
      "KPW": 900.000045,
      "KRW": 1394.480065,
      "KWD": 0.30925,
      "KYD": 0.833943,
      "KZT": 479.984266,
      "LAK": 16028.999565,
      "LBP": 1516.505497,
      "LKR": 359.251698,
      "LRD": 151.500977,
      "LSL": 17.77972,
      "LTL": 2.95274,
      "LVL": 0.60489,
      "LYD": 4.81501,
      "MAD": 10.13375,
      "MDL": 19.394218,
      "MGA": 3993.999695,
      "MKD": 62.146038,
      "MMK": 2101.61003,
      "MNT": 3224.442056,
      "MOP": 8.091525,
      "MRO": 356.999828,
      "MUR": 44.394487,
      "MVR": 15.460128,
      "MWK": 1018.979883,
      "MXN": 19.99684,
      "MYR": 4.398025,
      "MZN": 63.829781,
      "NAD": 17.78299,
      "NGN": 429.869773,
      "NIO": 35.770125,
      "NOK": 10.331179,
      "NPR": 127.974299,
      "NZD": 1.702255,
      "OMR": 0.384982,
      "PAB": 1.000751,
      "PEN": 3.777496,
      "PGK": 3.515004,
      "PHP": 57.95401,
      "PKR": 192.949924,
      "PLN": 4.845464,
      "PYG": 6992.465277,
      "QAR": 3.64125,
      "RON": 5.009504,
      "RSD": 118.860263,
      "RUB": 61.42503,
      "RWF": 1021,
      "SAR": 3.762505,
      "SBD": 8.126811,
      "SCR": 13.251511,
      "SDG": 575.000138,
      "SEK": 11.04113,
      "SGD": 1.415935,
      "SHP": 1.3774,
      "SLL": 12819.999884,
      "SOS": 580.0001,
      "SRD": 27.537034,
      "STD": 20697.981008,
      "SVC": 8.757225,
      "SYP": 2512.530318,
      "SZL": 17.786028,
      "THB": 37.160551,
      "TJS": 10.067072,
      "TMT": 3.5,
      "TND": 3.079499,
      "TOP": 2.38995,
      "TRY": 18.324035,
      "TTD": 6.799742,
      "TWD": 31.395702,
      "TZS": 2331.999984,
      "UAH": 36.959372,
      "UGX": 3821.891832,
      "USD": 1,
      "UYU": 41.03146,
      "UZS": 11164.99985,
      "VND": 23695,
      "VUV": 118.961877,
      "WST": 2.725578,
      "XAF": 661.633818,
      "XAG": 0.05146,
      "XAU": 0.0006,
      "XCD": 2.70255,
      "XDR": 0.772831,
      "XOF": 630.999938,
      "XPF": 115.150011,
      "YER": 250.249659,
      "ZAR": 17.691601,
      "ZMK": 9001.196097,
      "ZMW": 15.686894,
      "ZWL": 321.999592
  }
};


@Injectable({
  providedIn: 'root'
})
export class DevCurrencyConversionService {
  private conversionRatePromises: any = {};

  constructor() { }

  public getConversion(currencyCode: string, USDValue: number): any {
    if (this.conversionRatePromises[currencyCode] == undefined) {
      this.conversionRatePromises[currencyCode] = new Promise((resolve, reject) => {
        setTimeout(() => {
          resolve(SAMPLE_CONVERSION_TABLE['rates'][currencyCode]);
        }, 1500);
      });
    }

    return this.conversionRatePromises[currencyCode].then((rate: number) => {
      return rate*USDValue;
    });
  }
}
